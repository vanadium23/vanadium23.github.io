<?xml version="1.0" encoding="utf-8" standalone="yes" ?>




<?xml-stylesheet type="text/xsl" href="#stylesheet" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <xsl:stylesheet id="stylesheet" version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="xsl">
    <xsl:output method="html" doctype-system="about:legacy-compat" />
    <xsl:template match="/rss">
      <html lang="ru-ru">
        <head>
          <meta name="viewport" content="width=device-width, initial-scale=1.0" />
          <title>Python RSS | vanadium23</title>
          <link rel="stylesheet" href="https://vanadium23.me/css/base.min.34ac18bc3a855e272b475cf37b39ff5a4782c6c135d52b81107686678deaa01a.css" integrity="sha256-NKwYvDqFXicrR1zzezn/WkeCxsE11SuBEHaGZ43qoBo=" />
        </head>
        <body>
          <nav class="u-background">
    <div class="u-wrapper">
        <ul class="Banner">
            <li class="Banner-item Banner-item--title">
                <a class="Banner-link u-clickable" href="https://vanadium23.me/">
                    vanadium23
                </a>
            </li>
        
        <li class="Banner-item">
            <a class="Banner-link u-clickable" href="https://vanadium23.me/tags/dev/">Dev (Eng)</a>
        </li>
        
        <li class="Banner-item">
            <a class="Banner-link u-clickable" href="https://vanadium23.me/about/">About</a>
        </li>
        
        <li class="Banner-item">
            <a class="Banner-link u-clickable" href="https://vanadium23.me/tags/">Tags</a>
        </li>
        
        </ul>
    </div>
</nav>
          <main>
            <div class="u-wrapper">
              <div class="u-padding">
                <h2 class="Heading-title">
                  
                  <a class="Heading-link u-clickable" href="https://vanadium23.me/tags/python/index.xml" rel="bookmark">Python RSS</a>
                  
                </h2>
                
              </div>
            </div>
          </main>
          
<footer class="Footer">
  <div class="u-wrapper">
    <div class="u-padding">
        
        <a href="https://github.com/vanadium23"><i class="svg-icon github"></i></a>
        <a href="https://www.linkedin.com/in/vanadium23"><i class="svg-icon linkedin"></i></a>
        <a href="https://www.twitter.com/vanadium23"><i class="svg-icon twitter"></i></a>
        <a href="http://stackoverflow.com/users/4809450/vanadium23"><i class="svg-icon stackoverflow"></i></a>
        <a href="https://www.codewars.com/users/vanadium23"><i class="svg-icon codewars"></i></a>
    </div>
  </div>
</footer>

        </body>
      </html>
    </xsl:template>
  </xsl:stylesheet>
  <channel>
    <title>Python on vanadium23</title>
    <link>https://vanadium23.me/tags/python/</link>
    <description>Recent content in Python on vanadium23</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ru-ru</language>
    <lastBuildDate>Fri, 15 Dec 2017 17:00:00 +0300</lastBuildDate>
    <atom:link href="https://vanadium23.me/tags/python/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>PipEnv, Pipfile, pip... what?!</title>
      <link>https://vanadium23.me/pipenv-pipfile-pip-what/</link>
      <pubDate>Fri, 15 Dec 2017 17:00:00 +0300</pubDate>
      <guid>https://vanadium23.me/pipenv-pipfile-pip-what/</guid>
      <description>&lt;p&gt;My presentation about PipEnv from &lt;a href=&#34;http://www.moscowpython.ru/meetup/50/&#34;&gt;MoscowPython Meetup #50&lt;/a&gt; @ Rambler HQ.&lt;/p&gt;

&lt;p&gt;Video is in russian:
&lt;iframe width=&#34;640&#34; height=&#34;360&#34; src=&#34;https://www.youtube.com/embed/2N0phx7WTEI&#34; frameborder=&#34;0&#34; gesture=&#34;media&#34; allow=&#34;encrypted-media&#34; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;

&lt;p&gt;And slides in english:
&lt;script async class=&#34;speakerdeck-embed&#34; data-id=&#34;a52512c5af6c43a09cba15f23737e449&#34; data-ratio=&#34;1.77777777777778&#34; src=&#34;//speakerdeck.com/assets/embed.js&#34;&gt;&lt;/script&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>The Ajax, The REST and The GraphQL</title>
      <link>https://vanadium23.me/ajax-rest-graphql/</link>
      <pubDate>Fri, 18 Aug 2017 17:00:00 +0300</pubDate>
      <guid>https://vanadium23.me/ajax-rest-graphql/</guid>
      <description>&lt;p&gt;My presentation about GraphQL from MoscowPython Meetup #47 @ Mail.Ru HQ.&lt;/p&gt;

&lt;p&gt;Video is in russian:
&lt;iframe width=&#34;640&#34; height=&#34;360&#34; src=&#34;https://www.youtube.com/embed/9JqtlPO78y0&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;

&lt;p&gt;And slides in english:
&lt;script async class=&#34;speakerdeck-embed&#34; data-id=&#34;3022a498ddc344b4933b4b955dd7c660&#34; data-ratio=&#34;1.77777777777778&#34; src=&#34;//speakerdeck.com/assets/embed.js&#34;&gt;&lt;/script&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Funny notes on migration to python3</title>
      <link>https://vanadium23.me/funny-notes-on-py3k-migration/</link>
      <pubDate>Fri, 09 Dec 2016 17:00:00 +0300</pubDate>
      <guid>https://vanadium23.me/funny-notes-on-py3k-migration/</guid>
      <description>&lt;p&gt;Python3 is a great pain in python community. It was released on Dec 3, 2008 and brings major breaking changes and also new interpreter was slower, than python2 realization. After long way and five releases, in 2016, it&amp;rsquo;s obvious to start on python 3.5: type hinting, asyncio, same perfomance and gets better in coming &lt;a href=&#34;https://docs.python.org/3.6/whatsnew/3.6.html&#34;&gt;python 3.6&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Warning&lt;/strong&gt;: this is not an article about how to migrate to python3, but more about how to catch errors before deploy to prod.
For python3 migrations, see something like &lt;a href=&#34;https://www.toptal.com/python/python-3-is-it-worth-the-switch&#34;&gt;this&lt;/a&gt; or &lt;a href=&#34;http://python3porting.com/strategies.html&#34;&gt;this&lt;/a&gt;.
Always remember simple thing: more unit &amp;amp; integrations tests you have =&amp;gt; earlier you detect bugs.&lt;/p&gt;

&lt;p&gt;Contents:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;#py3k-division&#34;&gt;integer division&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#py3k-comparations&#34;&gt;unorderable types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#py3k-except&#34;&gt;except Exception&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#py3k-byteswarning&#34;&gt;bytes comparison&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#py3k-ujson&#34;&gt;special thanks to ujson&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#py3k-lxml&#34;&gt;lxml trap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#py3k-redispy&#34;&gt;changes in work with redis-py&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#py3k-django&#34;&gt;Note: how to make smaller diff between py2 and py3 version on django&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&#34;a-name-py3k-division-a-division&#34;&gt;&lt;a name=&#34;py3k-division&#34;&gt;&lt;/a&gt;Division&lt;/h1&gt;

&lt;p&gt;Can you guess what kind of exception will be there,
if hotel.rating is integer.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;stars = range(hotel.rating / 10)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Correct answer:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; TypeError: &#39;float&#39; object cannot be interpreted as an integer
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Solution:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# do it before migrations, it works on py2
from __future__ import division
stars = range(hotel.rating // 10)
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;a-name-py3k-comparations-a-unorderable-types&#34;&gt;&lt;a name=&#34;py3k-comparations&#34;&gt;&lt;/a&gt;Unorderable types&lt;/h1&gt;

&lt;p&gt;So, in python 3 you can&amp;rsquo;t do such things:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;None &amp;gt; None
1 &amp;gt; None
&#39;1&#39; &amp;gt; 1

&amp;gt; TypeError: unorderable types: int() &amp;gt; NoneType()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Because it&amp;rsquo;s more strict for types. How it was found:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;chosen_indexes = Obj.objects.values_list(&#39;chosen_index&#39;, flat=True)
...
...
...
max_index = max(chosen_indexes)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That&amp;rsquo;s ok code, but if field chosen_index can be null, you will catch TypeError.&lt;/p&gt;

&lt;p&gt;Solution: just filter None values in list, or null in queryset.&lt;/p&gt;

&lt;h2 id=&#34;a-name-py3k-except-a-except-exception&#34;&gt;&lt;a name=&#34;py3k-except&#34;&gt;&lt;/a&gt;except Exception&lt;/h2&gt;

&lt;p&gt;Pretty much uses external APIs: may be you send letters through MailGun or Mandrill, you can call some other services in your company.
But you know - sometimes they just fail: connection timeouts, 5xx errors.
For handling such cases you can make tuple of Exception:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from requests.exceptions import (
    RequestException,
    HTTPError
)

NETWORK_EXCEPTIONS = (
    RequestException,
    HTTPException,
)

try:
    # some bad code example, but for teach purpose
    response = requests.get(some_url)
    result = ujson.loads(response.content)
except (NETWORK_EXCEPTIONS, ValueError):
    log.error(&#39;some bad thing happend&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This code won&amp;rsquo;t work on python3, because interpreter check exception is subclass of BaseException.&lt;/p&gt;

&lt;p&gt;Solution:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from requests.exceptions import (
    RequestException,
    HTTPError
)

NETWORK_EXCEPTIONS = (
    RequestException,
    HTTPException
)

try:
    response = requests.get(some_url)
    result = ujson.loads(response.content)
except NETWORK_EXCEPTIONS + (ValueError,):
    log.error(&#39;some bad thing happend&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Second interesting example is that, except create variable in local scope and its make hard to print/ipdb. (This is some questing during interview, that I love to ask).
Example:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import json

exc = &#39;test&#39;
try:
    result = json.loads(&#39;{test}&#39;)
except ValueError as exc:
    pass
# there will be no exc variable on py3k
print(exc)
&amp;gt; NameError: name &#39;exc&#39; is not defined
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;a-name-py3k-byteswarning-a-bytes-comparison&#34;&gt;&lt;a name=&#34;py3k-byteswarning&#34;&gt;&lt;/a&gt;bytes comparison&lt;/h1&gt;

&lt;p&gt;It&amp;rsquo;s greatest pain in migration. So much pain, I can feel it in my head.
Next 3 bullets is about it.
First: no implicit conversion between str and bytes.
Solution:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;python3 -bb your_script.py
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It throw ByteWarning exception insted of falsing b&amp;rdquo; == &amp;ldquo;.&lt;/p&gt;

&lt;p&gt;Second: some libs expected bytes on input, some text.&lt;/p&gt;

&lt;p&gt;Solution: call .decode on bytes &amp;amp; encode on str.&lt;/p&gt;

&lt;h1 id=&#34;a-name-py3k-ujson-a-just-ujson&#34;&gt;&lt;a name=&#34;py3k-ujson&#34;&gt;&lt;/a&gt;just ujson&lt;/h1&gt;

&lt;p&gt;Json from standart libs expects str on input, ujson can deal with str and bytes.
Also ujson much faster, see comparasion on &lt;a href=&#34;https://github.com/esnme/ultrajson#benchmarks&#34;&gt;github&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&#34;a-name-py3k-lxml-a-lxml-trap&#34;&gt;&lt;a name=&#34;py3k-lxml&#34;&gt;&lt;/a&gt;lxml trap&lt;/h1&gt;

&lt;p&gt;Ooops, this was tough one. Some service provides XML API.
It answers question of life, universe and everything.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;root&amp;gt;
  &amp;lt;answer&amp;gt;42&amp;lt;/answer&amp;gt;
&amp;lt;/root&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You want to parse it using lxml:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from lxml import objectify

xml_answer = &amp;quot;&amp;quot;&amp;quot;
&amp;lt;root&amp;gt;
  &amp;lt;answer&amp;gt;42&amp;lt;/answer&amp;gt;
&amp;lt;/root&amp;gt;
&amp;quot;&amp;quot;&amp;quot;
xml = objectify.parse(buf).getroot()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This example works both on py2 and py3, but some little difference:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from lxml import objectify

xml_answer = &amp;quot;&amp;quot;&amp;quot;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;
&amp;lt;root&amp;gt;
  &amp;lt;answer&amp;gt;42&amp;lt;/answer&amp;gt;
&amp;lt;/root&amp;gt;
&amp;quot;&amp;quot;&amp;quot;
xml = objectify.parse(buf).getroot()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Aaaand lxml wants bytes on input instead of string ¯\&lt;em&gt;(ツ)&lt;/em&gt;/¯.&lt;/p&gt;

&lt;h1 id=&#34;a-name-py3k-redispy-a-redis-py-bytes&#34;&gt;&lt;a name=&#34;py3k-redispy&#34;&gt;&lt;/a&gt;redis-py bytes&lt;/h1&gt;

&lt;p&gt;All redis action from redispy returns bytes now. So if you use pure redis (not a django.core.cache), you need to explicit call decode. Also pickling objects between python3 and python2 doesn&amp;rsquo;t work, so make sure you make different keys in cache.&lt;/p&gt;

&lt;h2 id=&#34;a-name-py3k-django-a-note-how-to-make-smaller-diff-between-py2-and-py3-version-on-django&#34;&gt;&lt;a name=&#34;py3k-django&#34;&gt;&lt;/a&gt;Note: how to make smaller diff between py2 and py3 version on django&lt;/h2&gt;

&lt;p&gt;So sums it up with django experience:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;use smart_text instead of smart_unicode&lt;/li&gt;
&lt;li&gt;use @python_2_unicode_compatible decorator&lt;/li&gt;
&lt;li&gt;use key_prefix in django.caches, when moving&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Thanks for reading.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://vanadium23.me/images/move-to-py3k.png&#34; alt=&#34;keep calm and move to python3&#34; /&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Say hello to l10n in python</title>
      <link>https://vanadium23.me/l10n-in-python/</link>
      <pubDate>Sat, 26 Nov 2016 17:00:00 +0300</pubDate>
      <guid>https://vanadium23.me/l10n-in-python/</guid>
      <description>&lt;p&gt;In python world, many solutions for trivial problems could be found in standart library: from &lt;a href=&#34;https://docs.python.org/3/library/statistics.html&#34;&gt;statistical functions&lt;/a&gt; to &lt;a href=&#34;https://docs.python.org/3/library/gettext.html&#34;&gt;localization&lt;/a&gt; for your package.
But somehow some things just don&amp;rsquo;t connect to each other, and you just stuck at combining this constructor in right way.&lt;/p&gt;

&lt;p&gt;This gifs pretty sums up situation:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://vanadium23.me/images/modern-development.gif&#34; alt=&#34;modern-development&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Our task:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;create python package, that has localized string&lt;/li&gt;
&lt;li&gt;provide this string to django application&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;First thing, that you find at &lt;a href=&#34;https://docs.python.org/3/library/gettext.html&#34;&gt;gettext docs&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import gettext
import os

BASE_DIR = os.path.dirname(__file__)
LOCALE_DIR = os.path.join(BASE_DIR, &#39;locale&#39;)

# try to set param fallback to False
t = gettext.translation(&#39;default&#39;, LOCALE_DIR, fallback=True)
_ = t.ugettext

message = _(&#39;Test!&#39;)
print(message)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To change language on your system, you can simply set enviroment variable &lt;em&gt;LANG&lt;/em&gt; or &lt;em&gt;LANGUAGE&lt;/em&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~ export LANG=ru
~ python test.py
Test!
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This won&amp;rsquo;t work, because you don&amp;rsquo;t have translated phrases in your locale dir. Let&amp;rsquo;s compile them.
Command pygettext grabs all string in &lt;em&gt;ugettext&lt;/em&gt; function and dumps it to pot file.
After it, you need to init new locale (&lt;em&gt;note:&lt;/em&gt; if you need to merge with previos translations use &lt;em&gt;msgmerge&lt;/em&gt;).&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~ pygettext test.py
~ mkdir -p ./locale/{en,ru}/LC_MESSAGES/
~ msginit --input=messages.pot --locale=en_US.UTF-8 \
--output=./locale/en/LC_MESSAGES/default.po
~ msginit --input=messages.pot --locale=ru_RU.UTF-8 \
--output=./locale/ru/LC_MESSAGES/default.po
~ rm messages.pot
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now you can open default.po files with some tools, like &lt;a href=&#34;https://poedit.net/&#34;&gt;POEdit&lt;/a&gt; (&lt;em&gt;note:&lt;/em&gt; I prefer Sublime Text for small po).
Change in ru po msgstr from &amp;lsquo;Test!&amp;rsquo; to &amp;lsquo;Тест!&amp;rsquo;. When you run script again, output will be same (&amp;lsquo;Test!&amp;rsquo;).
This is because after modifying po, we need to compile it to binary format (known as mo).&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~ msgfmt en/LC_MESSAGES/default.po -o en/LC_MESSAGES/default.mo
~ msgfmt ru/LC_MESSAGES/default.po -o ru/LC_MESSAGES/default.mo
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Woo-hoo, output should be translated now, but it doesn&amp;rsquo;t work with django.
What shall we do? Read the &lt;a href=&#34;https://docs.djangoproject.com/en/1.10/topics/i18n/translation/#how-django-discovers-translations&#34;&gt;manual&lt;/a&gt;.
So we need to rename namespace from default to django, but also django realize &lt;a href=&#34;https://github.com/django/django/blob/1.10.3/django/utils/translation/trans_real.py#L90&#34;&gt;own class&lt;/a&gt;, so insted of using gettext.translation.ugettext you need to use &lt;em&gt;django.utils.translation&lt;/em&gt; one.
Full example can be found in &lt;a href=&#34;https://github.com/vanadium23/py-hello-l10n&#34;&gt;repository&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Cook django with aiohttp workers</title>
      <link>https://vanadium23.me/django-gunicorn-aiohttp/</link>
      <pubDate>Sun, 20 Nov 2016 17:00:00 +0300</pubDate>
      <guid>https://vanadium23.me/django-gunicorn-aiohttp/</guid>
      <description>&lt;p&gt;There is some standart stack to run django in production.
For python 2, it is nginx + gunicorn or uwsgi + monkey patching libs, such as gevent or eventlet.
Generally, I prefer gunicorn + eventlet, but when you switch (or start) django project on latest python 3.5, eventlet can do &lt;a href=&#34;https://github.com/eventlet/eventlet/issues/313&#34;&gt;some bad magic&lt;/a&gt;. And you can switch to a new built-in mechanism, called &lt;em&gt;aiohttp&lt;/em&gt;.
Based on &lt;a href=&#34;http://docs.gunicorn.org/en/stable/design.html?highlight=gaiohttp#asyncio-workers&#34;&gt;gunicorn docs&lt;/a&gt;, you need simply switch worker to &lt;em&gt;gaiohttp&lt;/em&gt; and that&amp;rsquo;s all.&lt;/p&gt;

&lt;p&gt;Then, something bad happens.
&lt;img src=&#34;https://vanadium23.me/images/gaiohttp-memory.png&#34; alt=&#34;gaiohttp-memory&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Answer is very simple: &lt;strike&gt;you write some memoryleaking code&lt;/strike&gt; &lt;em&gt;gaiohttp&lt;/em&gt; ignores max_requests option.
In other words, workers won&amp;rsquo;t be killed after max_requests count. After some search on internet, there is an &lt;a href=&#34;http://asvetlov.blogspot.ru/2014/06/asyncio-aiohttp-gunicorn.html&#34;&gt;article&lt;/a&gt; from asyncio contributor about copy-n-pasting worker from aiohttp repo to gunicorn.
&lt;a href=&#34;http://aiohttp.readthedocs.io/en/stable/deployment.html#start-gunicorn&#34;&gt;Aiohttp docs&lt;/a&gt; says that you should use &lt;code&gt;aiohttp.worker.GunicornWebWorker&lt;/code&gt;, but when you switch setting there will be error.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[5898] [ERROR] Exception in worker process
Traceback (most recent call last):
  File &amp;quot;./gunicorn/arbiter.py&amp;quot;, line 557, in spawn_worker
    worker.init_process()
  File &amp;quot;./aiohttp/worker.py&amp;quot;, line 37, in init_process
    super().init_process()
  File &amp;quot;./gunicorn/workers/base.py&amp;quot;, line 132, in init_process
    self.run()
  File &amp;quot;./aiohttp/worker.py&amp;quot;, line 40, in run
    self.loop.run_until_complete(self.wsgi.startup())
AttributeError:
    &#39;WSGIHandler&#39; object has no attribute &#39;startup&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;So &lt;em&gt;aiohttp.worker.GunicornWebWorker&lt;/em&gt; differs from standart wsgi app for django. Luckily, python community has two packages to overcome these difficulties: &lt;em&gt;aiohttp-wsgi&lt;/em&gt; and &lt;em&gt;aiodjango&lt;/em&gt;, add them to your &lt;em&gt;requirements.txt&lt;/em&gt;.
After this modify your &lt;em&gt;wsgi.py&lt;/em&gt; according to &lt;a href=&#34;http://aiodjango.readthedocs.io/en/latest/usage.html#defining-the-application&#34;&gt;docs&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;import os

from django.core.wsgi import get_wsgi_application

from aiodjango import get_aio_application


os.environ.setdefault(&#39;DJANGO_SETTINGS_MODULE&#39;, &#39;settings&#39;)

# Build WSGI application
# Any WSGI middleware would be added here
application = get_wsgi_application()

# Build aiohttp application
app = get_aio_application(application)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That&amp;rsquo;s all folks.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>